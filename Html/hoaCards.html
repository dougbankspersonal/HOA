<html>
  <head>
    <link rel="stylesheet" href="css/hoa_cards.css" />
    <link rel="stylesheet" href="css/hoa_images.css" />
    <link rel="stylesheet" href="SharedWebBoardGame/css/card.css" />
    <link rel="stylesheet" href="SharedWebBoardGame/css/main.css" />
    <link rel="stylesheet" href="SharedWebBoardGame/css/image.css" />
    <link rel="stylesheet" href="SharedWebBoardGame/css/triangle_cards.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Luckiest+Guy&display=swap"
      rel="stylesheet"
    />
    <meta content="text/html; charset=UTF-8" http-equiv="content-type" />
    <style type="text/css"></style>
  </head>

  <body id="body">
    <!-- configure Dojo -->
    <script>
      // Instead of using data-dojo-config, we're creating a dojoConfig
      // object *before* we load dojo.js; they're functionally identical,
      // it's just easier to read this approach with a larger configuration.
      var dojoConfig = {
        baseUrl: ".",
        async: true,
        // This code registers the correct location of the "demo"
        // package so we can load Dojo from the CDN whilst still
        // being able to load local modules
        packages: [
          { name: "dojo", location: "../../bower_components/dojo" },
          { name: "javascript", location: "javascript" },
          {
            name: "sharedJavascript",
            location: "SharedWebBoardgame/javascript",
          },
        ],
      };
    </script>
    <!-- load Dojo -->
    <script src="../../bower_components/dojo/dojo.js"></script>

    <script>
      require([
        "sharedJavascript/cards",
        "sharedJavascript/debugLog",
        "sharedJavascript/genericMeasurements",
        "sharedJavascript/genericUtils",
        "sharedJavascript/htmlUtils",
        "sharedJavascript/systemConfigs",
        "sharedJavascript/triangleCards",
        "javascript/hoaCardConfigConstruction",
        "javascript/hoaDeckConfigConstruction",
      ], function (
        cards,
        debugLogModule,
        genericMeasurements,
        genericUtils,
        htmlUtils,
        systemConfigs,
        triangleCards,
        hoaCardConfigConstruction,
        hoaDeckConfigConstruction
      ) {
        var debugLog = debugLogModule.debugLog;

        // FIXME(dbanks) does not work, change all scaling and position to be percents.
        /*
              var width = genericMeasurements.standardCardWidthPx * 1.5;
              var height = genericMeasurements.triangleCardHeightPx * 1.5;
              var sc = systemConfigs.getCardSystemConfigs({
                cardWidthPx: width,
                cardHeightPx: height,
              });
      */
        var sc = systemConfigs.getCardSystemConfigs({
          cardHeightPx: genericMeasurements.triangleCardHeightPx,
        });

        systemConfigs.setSystemConfigs(sc);
        debugLog("hoaCards", "cardsPerRow = " + sc.cardsPerRow);

        var deckConfig = hoaDeckConfigConstruction.getDeckConfig();
        debugLog("hoaCards", "deckConfig = " + JSON.stringify(deckConfig));
        hoaCardConfigConstruction.generateCardConfigs(deckConfig);
        var cardConfigs = hoaCardConfigConstruction.getCardConfigs();
        debugLog("hoaCards", "cardConfigs = " + JSON.stringify(cardConfigs));

        var numCards = cards.getNumCardsFromConfigs(cardConfigs);
        debugLog("hoaCards", "numCards = " + numCards);

        var backConfig = {
          callback: function (parentNode, index) {
            return triangleCards.addCardBack(parentNode, cardConfigs, index);
          },
          classes: ["hoa"],
        };

        cards.addCards(
          numCards,
          function (parentNode, index) {
            return triangleCards.addCardFront(parentNode, cardConfigs, index);
          },
          backConfig
        );
      });
    </script>
  </body>
</html>
